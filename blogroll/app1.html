<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head>
<body>
  <div id="todo">
  </div>
  <script type="text/template" id="item-template">
    <div class="view">
      <input id="todo_complete" type="checkbox" <%= completed ? 'checked="checked"' : '' %> />
      <label><%= title %></label>
      <button class="destroy"></button>
    </div>
    <input class="edit" value="<%= title %>">
  </script>
  <script type="text/javascript" src="../bower_components/jquery/dist/jquery.js"></script>
  <script type="text/javascript" src="../bower_components/bootstrap/dist/js/bootstrap.js"></script>
  <script type="text/javascript" src="../bower_components/underscore/underscore.js"></script>
  <script type="text/javascript" src="../bower_components/backbone/backbone.js"></script>
  <script type="text/javascript" >
    // Define a Todo Model
var Todo = Backbone.Model.extend({
  // Default todo attribute values
  defaults: {
    title: '',
    completed: false
  },
  se: (function(){
    console.log('model');
  })()
});
// Instantiate the Todo Model with a title, with the completed attribute
// defaulting to false
var myTodo = new Todo({
  title: 'Check attributes property of the logged models in the console.'
});

var TodoView = Backbone.View.extend({
  tagName:  'li',
  // Cache the template function for a single item.
  todoTpl: _.template($('#item-template').html()),
  events: {
    'dblclick label': 'edit',
    'keypress .edit': 'updateOnEnter',
    'click .destroy':   'close'
  },
  // Called when the view is first created
  initialize: function() {
    // console.log($('#todo'));
    this.$el = $('#todo');
    this.render();
    // Later we'll look at:
    // this.listenTo(someCollection, 'all', this.render);
    // but you can actually run this example right now by
    // calling todoView.render();
    this.listenTo(this.model,'change',this.render);
  },
  // Re-render the titles of the todo item.
  render: function() {
    console.log('render');
    console.log(this.todoTpl( this.model.attributes ));
    this.$el.html( this.todoTpl( this.model.attributes ));
    // $el here is a reference to the jQuery element
    // associated with the view, todoTpl is a reference
    // to an Underscore template and model.attributes
    // contains the attributes of the model.
    // Altogether, the statement is replacing the HTML of
    // a DOM element with the result of instantiating a
    // template with the model's attributes.
    this.input = this.$('.edit');
    return this;
  },
  edit: function() {
    // executed when todo label is double clicked
    console.log('ddd');
  },
  close: function() {
    // executed when todo loses focus
    alert('click');
  },
  updateOnEnter: function( e ) {
    // executed on each keypress when in todo edit mode,
    // but we'll wait for enter to get in action
  }
});
// create a view for a todo
var todoView = new TodoView({model: myTodo});


</script>
</body>
</html>

